{
 "name": "bookstore-new",
 "description": " ",
 "version": "1.0.0",
 "type": "flogo:app",
 "appModel": "1.0.0",
 "resources": [
  {
   "id": "flow:book-flow",
   "data": {
    "name": "book-flow",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage",
      "name": "LogMessage",
      "activity": {
       "ref": "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/activity/log",
       "settings": {},
       "input": {
        "Log Level": "INFO"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"isbn: \", $flow.isbn)"
         }
        ]
       }
      }
     },
     {
      "id": "InvokeRESTService",
      "name": "InvokeRESTService",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/rest",
       "settings": {},
       "input": {},
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['method']",
          "type": "literal",
          "value": "GET"
         },
         {
          "mapTo": "$INPUT['uri']",
          "type": "literal",
          "value": "https://www.googleapis.com/books/v1/volumes"
         },
         {
          "mapTo": "$INPUT['queryParams']",
          "type": "object",
          "value": {
           "q": "{{$flow.isbn}}"
          }
         }
        ]
       }
      }
     },
     {
      "id": "Return",
      "name": "Return",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "settings": {},
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['code']",
          "type": "literal",
          "value": 200
         },
         {
          "mapTo": "$INPUT['message']['title']",
          "type": "assign",
          "value": "$activity[InvokeRESTService].result.items[0].volumeInfo.title"
         },
         {
          "mapTo": "$INPUT['message']['publishedDate']",
          "type": "assign",
          "value": "$activity[InvokeRESTService].result.items[0].volumeInfo.publishedDate"
         },
         {
          "mapTo": "$INPUT['message']['description']",
          "type": "assign",
          "value": "$activity[InvokeRESTService].result.items[0].volumeInfo.description"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage",
      "to": "InvokeRESTService",
      "type": "default"
     },
     {
      "id": 2,
      "from": "InvokeRESTService",
      "to": "Return",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "isbn",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "code",
       "type": "number"
      },
      {
       "name": "message",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"title\":{\"type\":\"string\"},\"publishedDate\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"}}"
       }
      }
     ]
    },
    "explicitReply": true
   }
  }
 ],
 "triggers": [
  {
   "ref": "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/trigger/rest",
   "name": "ReceiveHTTPMessage",
   "description": "",
   "settings": {
    "port": 9233
   },
   "id": "ReceiveHTTPMessage",
   "handlers": [
    {
     "description": "",
     "settings": {
      "Method": "GET",
      "Path": "/books/{isbn}",
      "OutputValidation": false
     },
     "outputs": {
      "pathParams": {
       "metadata": "{\"type\":\"object\",\"properties\":{\"isbn\":{\"type\":\"string\"}},\"required\":[]}",
       "value": ""
      },
      "headers": {
       "metadata": "{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\"},\"Accept-Charset\":{\"type\":\"string\"},\"Accept-Encoding\":{\"type\":\"string\"},\"Content-Type\":{\"type\":\"string\"},\"Content-Length\":{\"type\":\"string\"},\"Connection\":{\"type\":\"string\"},\"Cookie\":{\"type\":\"string\"},\"Pragma\":{\"type\":\"string\"}},\"required\":[]}",
       "value": ""
      },
      "body": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"number\"},\"message\":{\"type\":\"object\",\"properties\":{}}}}",
       "value": ""
      }
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:book-flow"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['isbn']",
         "type": "assign",
         "value": "$.pathParams.isbn"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['code']",
         "type": "assign",
         "value": "$.code"
        },
        {
         "mapTo": "$INPUT['data']['message']['title']",
         "type": "assign",
         "value": "$.message.title"
        },
        {
         "mapTo": "$INPUT['data']['message']['publishedDate']",
         "type": "assign",
         "value": "$.message.publishedDate"
        },
        {
         "mapTo": "$INPUT['data']['message']['description']",
         "type": "assign",
         "value": "$.message.description"
        }
       ]
      }
     },
     "reply": {
      "code": "$.code",
      "data": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"number\"},\"message\":{\"type\":\"object\",\"properties\":{\"title\":{\"type\":\"string\"},\"publishedDate\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"}}}}}",
       "value": ""
      },
      "message": "any"
     }
    }
   ]
  }
 ],
 "properties": [],
 "ui": "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",
 "contrib": "W3sicmVmIjoiZ2l0LnRpYmNvLmNvbS9naXQvcHJvZHVjdC9pcGFhcy93aS1jb250cmliLmdpdC9jb250cmlidXRpb25zL0dlbmVyYWwiLCJzM2xvY2F0aW9uIjoiVGliY28vR2VuZXJhbCJ9LHsicmVmIjoiZ2l0aHViLmNvbS9USUJDT1NvZnR3YXJlL2Zsb2dvLWNvbnRyaWIvYWN0aXZpdHkvcmVzdCIsInMzbG9jYXRpb24iOiJ7VVNFUklEfS9EZWZhdWx0L2FjdGl2aXR5L3Jlc3QifV0=",
 "connection": "UEsDBAoAAAAIAAF3fU4pu0wNBAAAAAIAAAAJAAAAY29ubi5qc29ui44FAFBLAQIUAAoAAAAIAAF3fU4pu0wNBAAAAAIAAAAJAAAAAAAAAAAAAAAAAAAAAABjb25uLmpzb25QSwUGAAAAAAEAAQA3AAAAKwAAAAAA"
}