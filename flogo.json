{
 "name": "bookstore-new",
 "description": " ",
 "version": "1.0.0",
 "type": "flogo:app",
 "appModel": "1.0.0",
 "resources": [
  {
   "id": "flow:book-flow",
   "data": {
    "name": "book-flow",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage",
      "name": "LogMessage",
      "activity": {
       "ref": "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/activity/log",
       "settings": {},
       "input": {
        "Log Level": "INFO"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"isbn number: \", $flow.isbn)"
         }
        ]
       }
      }
     },
     {
      "id": "InvokeRESTService",
      "name": "InvokeRESTService",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/rest",
       "settings": {},
       "input": {},
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['method']",
          "type": "literal",
          "value": "GET"
         },
         {
          "mapTo": "$INPUT['uri']",
          "type": "literal",
          "value": "https://www.googleapis.com/books/v1/volumes"
         },
         {
          "mapTo": "$INPUT['queryParams']",
          "type": "object",
          "value": {
           "q": "{{$flow.isbn}}"
          }
         }
        ]
       }
      }
     },
     {
      "id": "Return",
      "name": "Return",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "settings": {},
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['code']",
          "type": "literal",
          "value": 200
         },
         {
          "mapTo": "$INPUT['message']['title']",
          "type": "assign",
          "value": "$activity[InvokeRESTService].result.items[0].volumeInfo.title"
         },
         {
          "mapTo": "$INPUT['message']['publishedDate']",
          "type": "assign",
          "value": "$activity[InvokeRESTService].result.items[0].volumeInfo.publishedDate"
         },
         {
          "mapTo": "$INPUT['message']['description']",
          "type": "assign",
          "value": "$activity[InvokeRESTService].result.items[0].volumeInfo.description"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage",
      "to": "InvokeRESTService",
      "type": "default"
     },
     {
      "id": 2,
      "from": "InvokeRESTService",
      "to": "Return",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "isbn",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "code",
       "type": "number"
      },
      {
       "name": "message",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"title\":{\"type\":\"string\"},\"publishedDate\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"}}"
       }
      }
     ]
    },
    "explicitReply": true
   }
  }
 ],
 "triggers": [
  {
   "ref": "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/trigger/rest",
   "name": "ReceiveHTTPMessage",
   "description": "",
   "settings": {
    "port": 9233
   },
   "id": "ReceiveHTTPMessage",
   "handlers": [
    {
     "description": "",
     "settings": {
      "Method": "GET",
      "Path": "/books/{isbn}",
      "OutputValidation": false
     },
     "outputs": {
      "pathParams": {
       "metadata": "{\"type\":\"object\",\"properties\":{\"isbn\":{\"type\":\"string\"}},\"required\":[]}",
       "value": ""
      },
      "headers": {
       "metadata": "{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\"},\"Accept-Charset\":{\"type\":\"string\"},\"Accept-Encoding\":{\"type\":\"string\"},\"Content-Type\":{\"type\":\"string\"},\"Content-Length\":{\"type\":\"string\"},\"Connection\":{\"type\":\"string\"},\"Cookie\":{\"type\":\"string\"},\"Pragma\":{\"type\":\"string\"}},\"required\":[]}",
       "value": ""
      },
      "body": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"number\"},\"message\":{\"type\":\"object\",\"properties\":{}}}}",
       "value": ""
      }
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:book-flow"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['isbn']",
         "type": "assign",
         "value": "$.pathParams.isbn"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['code']",
         "type": "assign",
         "value": "$.code"
        },
        {
         "mapTo": "$INPUT['data']['message']['title']",
         "type": "assign",
         "value": "$.message.title"
        },
        {
         "mapTo": "$INPUT['data']['message']['publishedDate']",
         "type": "assign",
         "value": "$.message.publishedDate"
        },
        {
         "mapTo": "$INPUT['data']['message']['description']",
         "type": "assign",
         "value": "$.message.description"
        }
       ]
      }
     },
     "reply": {
      "code": "$.code",
      "data": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"number\"},\"message\":{\"type\":\"object\",\"properties\":{\"title\":{\"type\":\"string\"},\"publishedDate\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"}}}}}",
       "value": ""
      },
      "message": "any"
     }
    }
   ]
  }
 ],
 "properties": [],
 "ui": "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",
 "contrib": "W3sicmVmIjoiZ2l0LnRpYmNvLmNvbS9naXQvcHJvZHVjdC9pcGFhcy93aS1jb250cmliLmdpdC9jb250cmlidXRpb25zL0dlbmVyYWwiLCJzM2xvY2F0aW9uIjoiVGliY28vR2VuZXJhbCJ9LHsicmVmIjoiZ2l0aHViLmNvbS9USUJDT1NvZnR3YXJlL2Zsb2dvLWNvbnRyaWIvYWN0aXZpdHkvcmVzdCIsInMzbG9jYXRpb24iOiJ7VVNFUklEfS9EZWZhdWx0L2FjdGl2aXR5L3Jlc3QifV0=",
 "connection": "UEsDBAoAAAAIAE16fU4pu0wNBAAAAAIAAAAJAAAAY29ubi5qc29ui44FAFBLAQIUAAoAAAAIAE16fU4pu0wNBAAAAAIAAAAJAAAAAAAAAAAAAAAAAAAAAABjb25uLmpzb25QSwUGAAAAAAEAAQA3AAAAKwAAAAAA"
}